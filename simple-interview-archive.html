<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸í„°ë·° ì•„ì¹´ì´ë¸Œ - ê°„í¸ ë²„ì „</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Inter:wght@400;600&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
        .en-text {
            font-family: 'Inter', sans-serif;
        }
        
        .video-container {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 ë¹„ìœ¨ */
            height: 0;
            overflow: hidden;
        }
        
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-6xl mx-auto p-4 md:p-8">
        <!-- Header -->
        <div class="bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 md:p-8 text-white mb-8 shadow-lg">
            <h1 class="text-3xl md:text-4xl font-bold mb-2">ğŸ¬ ì¸í„°ë·° ì•„ì¹´ì´ë¸Œ</h1>
            <p class="text-purple-100">ìœ íŠœë¸Œ ì£¼ì†Œë§Œ ë¶™ì—¬ë„£ìœ¼ë©´ ë!</p>
        </div>

        <!-- Add Video Form -->
        <div class="bg-white rounded-xl p-6 shadow-md mb-8">
            <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                <span>â•</span> ìƒˆ ì˜ìƒ ì¶”ê°€
            </h2>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold mb-2">ìœ íŠœë¸Œ ì£¼ì†Œ</label>
                    <input 
                        type="text" 
                        id="youtube-url" 
                        placeholder="https://www.youtube.com/watch?v=..."
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    >
                    <p class="text-xs text-gray-500 mt-1">â€» ìœ íŠœë¸Œ ë§í¬ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”</p>
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">ì œëª© (ì„ íƒ)</label>
                    <input 
                        type="text" 
                        id="video-title" 
                        placeholder="ìë™ìœ¼ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                    >
                </div>

                <div>
                    <label class="block text-sm font-semibold mb-2">
                        ìŠ¤í¬ë¦½íŠ¸ ì…ë ¥ ë°©ì‹ ì„ íƒ
                    </label>
                    <div class="flex gap-4 mb-3">
                        <label class="flex items-center gap-2">
                            <input type="radio" name="script-mode" value="auto" checked class="text-purple-600">
                            <span class="text-sm">ìë™ (ìœ íŠœë¸Œ ìë§‰)</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="radio" name="script-mode" value="manual" class="text-purple-600">
                            <span class="text-sm">ìˆ˜ë™ ì…ë ¥</span>
                        </label>
                    </div>
                </div>

                <div id="manual-script-area" class="hidden">
                    <label class="block text-sm font-semibold mb-2">ìŠ¤í¬ë¦½íŠ¸ (í•œ ì¤„ì”© ì…ë ¥)</label>
                    <textarea 
                        id="script-input" 
                        rows="8"
                        placeholder="ì˜ì–´|í•œê¸€ í˜•ì‹ìœ¼ë¡œ ì…ë ¥
ì˜ˆì‹œ:
Hello, how are you?|ì•ˆë…•í•˜ì„¸ìš”, ì–´ë–»ê²Œ ì§€ë‚´ì„¸ìš”?
I'm doing great!|ì •ë§ ì˜ ì§€ë‚´ê³  ìˆì–´ìš”!"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"
                    ></textarea>
                    <p class="text-xs text-gray-500 mt-1">â€» ê° ì¤„ë§ˆë‹¤ "ì˜ì–´|í•œê¸€" í˜•ì‹ìœ¼ë¡œ êµ¬ë¶„ìëŠ” | (íŒŒì´í”„) ì‚¬ìš©</p>
                </div>

                <button 
                    onclick="addVideo()" 
                    class="w-full bg-gradient-to-r from-purple-600 to-pink-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-pink-700 transition-all shadow-md hover:shadow-lg"
                >
                    ì˜ìƒ ì¶”ê°€í•˜ê¸°
                </button>
            </div>
        </div>

        <!-- Video List -->
        <div id="video-list" class="space-y-6">
            <!-- ì˜ˆì‹œ ì˜ìƒ -->
            <div class="bg-white rounded-xl shadow-md overflow-hidden">
                <button 
                    onclick="toggleVideo(this)" 
                    class="w-full p-6 text-left flex justify-between items-center hover:bg-gray-50 transition-colors"
                >
                    <div class="flex-1">
                        <h3 class="font-bold text-lg mb-1">ì˜ˆì‹œ: ìƒ˜í”Œ ì¸í„°ë·°</h3>
                        <p class="text-sm text-gray-500">2024-01-15 Â· Sample Channel</p>
                    </div>
                    <svg class="w-6 h-6 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                
                <div class="video-content hidden p-6 pt-0 border-t border-gray-100">
                    <div class="grid md:grid-cols-2 gap-6">
                        <!-- Video Player -->
                        <div>
                            <div class="video-container rounded-lg overflow-hidden shadow-lg mb-4">
                                <iframe 
                                    src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
                                    frameborder="0" 
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                    allowfullscreen
                                ></iframe>
                            </div>
                            <p class="text-xs text-gray-500 text-center">
                                ì˜ìƒ ì¬ìƒ ì•ˆ ë˜ë©´ ì—…ë¡œë”ê°€ ì„ë² ë“œë¥¼ ì°¨ë‹¨í–ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
                            </p>
                        </div>
                        
                        <!-- Script -->
                        <div class="space-y-3 max-h-96 overflow-y-auto pr-2">
                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border-l-4 border-purple-500">
                                <p class="en-text text-gray-800 mb-2">Hello! This is a sample interview.</p>
                                <p class="text-gray-600 text-sm">ì•ˆë…•í•˜ì„¸ìš”! ì´ê²ƒì€ ìƒ˜í”Œ ì¸í„°ë·°ì…ë‹ˆë‹¤.</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border-l-4 border-purple-500">
                                <p class="en-text text-gray-800 mb-2">Can you tell us about your experience?</p>
                                <p class="text-gray-600 text-sm">ë‹¹ì‹ ì˜ ê²½í—˜ì— ëŒ€í•´ ë§ì”€í•´ ì£¼ì‹œê² ì–´ìš”?</p>
                            </div>
                            
                            <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border-l-4 border-purple-500">
                                <p class="en-text text-gray-800 mb-2">It was absolutely amazing!</p>
                                <p class="text-gray-600 text-sm">ì •ë§ ë†€ë¼ìš´ ê²½í—˜ì´ì—ˆì–´ìš”!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="mt-12 text-center text-gray-500 text-sm">
            <p>ğŸ’¡ Tip: ìŠ¤í¬ë¦½íŠ¸ë¥¼ ChatGPTì— ë„£ê³  "í•œ ì¤„ì”© í•œê¸€ ë²ˆì—­í•´ì¤˜" í•˜ë©´ ë¹ ë¦…ë‹ˆë‹¤</p>
            <p class="mt-2">ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì— ì €ì¥ë©ë‹ˆë‹¤ (ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œëŠ” ì•ˆ ë³´ì—¬ìš”)</p>
        </div>
    </div>

    <script>
        // ë¼ë””ì˜¤ ë²„íŠ¼ ë³€ê²½ ê°ì§€
        document.querySelectorAll('input[name="script-mode"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const manualArea = document.getElementById('manual-script-area');
                if (e.target.value === 'manual') {
                    manualArea.classList.remove('hidden');
                } else {
                    manualArea.classList.add('hidden');
                }
            });
        });

        function toggleVideo(button) {
            const content = button.nextElementSibling;
            const chevron = button.querySelector('.chevron');
            
            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                chevron.style.transform = 'rotate(180deg)';
            } else {
                content.classList.add('hidden');
                chevron.style.transform = 'rotate(0deg)';
            }
        }

        function extractVideoId(url) {
            // ìœ íŠœë¸Œ URLì—ì„œ Video ID ì¶”ì¶œ
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }

        async function fetchYouTubeTitle(videoId) {
            // ì‹¤ì œë¡œëŠ” YouTube Data API í•„ìš”í•˜ì§€ë§Œ, ê°„ë‹¨íˆ iframe titleë¡œ ëŒ€ì²´ ê°€ëŠ¥
            // API í‚¤ ì—†ì´ë„ ì‘ë™í•˜ëŠ” ë°©ë²•
            try {
                const response = await fetch(`https://noembed.com/embed?url=https://www.youtube.com/watch?v=${videoId}`);
                const data = await response.json();
                return data.title || 'ì œëª©ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤';
            } catch (error) {
                return 'ì˜ìƒ ì œëª©';
            }
        }

        async function fetchYouTubeSubtitles(videoId) {
            // ì‹¤ì œ êµ¬í˜„ì—ëŠ” ì„œë²„ í•„ìš” (CORS ì œí•œ)
            // ì—¬ê¸°ì„œëŠ” ì‹œë®¬ë ˆì´ì…˜
            alert('ìë™ ìë§‰ ê°€ì ¸ì˜¤ê¸°ëŠ” ì„œë²„ê°€ í•„ìš”í•©ë‹ˆë‹¤.\nì§€ê¸ˆì€ "ìˆ˜ë™ ì…ë ¥" ëª¨ë“œë¥¼ ì‚¬ìš©í•´ì£¼ì„¸ìš”!');
            return null;
        }

        async function addVideo() {
            const url = document.getElementById('youtube-url').value.trim();
            const titleInput = document.getElementById('video-title').value.trim();
            const scriptMode = document.querySelector('input[name="script-mode"]:checked').value;
            const scriptInput = document.getElementById('script-input').value.trim();

            if (!url) {
                alert('ìœ íŠœë¸Œ ì£¼ì†Œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            const videoId = extractVideoId(url);
            if (!videoId) {
                alert('ì˜¬ë°”ë¥¸ ìœ íŠœë¸Œ ì£¼ì†Œê°€ ì•„ë‹™ë‹ˆë‹¤!');
                return;
            }

            // ì œëª© ê°€ì ¸ì˜¤ê¸°
            const title = titleInput || await fetchYouTubeTitle(videoId);

            let scriptLines = [];
            
            if (scriptMode === 'auto') {
                // ìë™ ëª¨ë“œ (ì‹¤ì œë¡œëŠ” ì„œë²„ í•„ìš”)
                const subtitles = await fetchYouTubeSubtitles(videoId);
                if (!subtitles) return;
                scriptLines = subtitles;
            } else {
                // ìˆ˜ë™ ì…ë ¥ ëª¨ë“œ
                if (!scriptInput) {
                    alert('ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                    return;
                }
                
                scriptLines = scriptInput.split('\n')
                    .filter(line => line.trim())
                    .map(line => {
                        const [en, ko] = line.split('|').map(s => s.trim());
                        return { en: en || '', ko: ko || '' };
                    });
            }

            // ì˜ìƒ ì¹´ë“œ ìƒì„±
            createVideoCard(videoId, title, scriptLines);

            // ì…ë ¥ í¼ ì´ˆê¸°í™”
            document.getElementById('youtube-url').value = '';
            document.getElementById('video-title').value = '';
            document.getElementById('script-input').value = '';

            alert('ì˜ìƒì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰');
        }

        function createVideoCard(videoId, title, scriptLines) {
            const videoList = document.getElementById('video-list');
            const today = new Date().toISOString().split('T')[0];

            const scriptHTML = scriptLines.map(line => `
                <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border-l-4 border-purple-500">
                    <p class="en-text text-gray-800 mb-2">${line.en}</p>
                    <p class="text-gray-600 text-sm">${line.ko}</p>
                </div>
            `).join('');

            const cardHTML = `
                <div class="bg-white rounded-xl shadow-md overflow-hidden">
                    <button 
                        onclick="toggleVideo(this)" 
                        class="w-full p-6 text-left flex justify-between items-center hover:bg-gray-50 transition-colors"
                    >
                        <div class="flex-1">
                            <h3 class="font-bold text-lg mb-1">${title}</h3>
                            <p class="text-sm text-gray-500">${today}</p>
                        </div>
                        <svg class="w-6 h-6 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    
                    <div class="video-content hidden p-6 pt-0 border-t border-gray-100">
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <div class="video-container rounded-lg overflow-hidden shadow-lg mb-4">
                                    <iframe 
                                        src="https://www.youtube.com/embed/${videoId}" 
                                        frameborder="0" 
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                        allowfullscreen
                                    ></iframe>
                                </div>
                                <p class="text-xs text-gray-500 text-center">
                                    ì˜ìƒ ì¬ìƒ ì•ˆ ë˜ë©´ ì—…ë¡œë”ê°€ ì„ë² ë“œë¥¼ ì°¨ë‹¨í–ˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤
                                </p>
                            </div>
                            
                            <div class="space-y-3 max-h-96 overflow-y-auto pr-2">
                                ${scriptHTML}
                            </div>
                        </div>
                    </div>
                </div>
            `;

            videoList.insertAdjacentHTML('afterbegin', cardHTML);
        }
    </script>
</body>
</html>